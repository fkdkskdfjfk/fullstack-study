<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script>
        // 3. async / await (ES2017) - 프로미스의 대체가 아님
        // "프로미스를 작성하기 쉽게 만듭니다." - 문법적 설탕
        
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> 1f32dd0 (as)
=======
>>>>>>> 1f32dd0 (as)

        // 비동기 함수 만들어보기 예제
        // 일반적인 함수
        function fetchData() {
            return new Promise((resolve, reject) => {
                // 네트워크 요청을 통해 시간이 걸리는 작업...
                resolve('네가 원하는 데이터');
            });
        }

        fetchData().then(res => {
            console.log(res);
        });
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> 37872db ('11')
=======
>>>>>>> 37872db ('11')

        // 비동기 함수를 만들기 위해 함수 앞에 async 키워드를 붙이면 프로미스 객체를 만들지 않아도 자동으로 프로미스로 반환됨
        async function fetchData2() { // 비동기 함수 선언
            // 네트워크 요청을 통해 시간이 걸리는 작업...
            return '네가 원하는 데이터';
        }

        fetchData2().then(res => {
            console.log(res);
        });

        // 3-1. 프로미스를 사용한 방식과 async / awiat로 리팩터링 하기
        // 예제1
        function walk(amount) {
            return new Promise((resolve, reject) => {
                if (amount < 500) {
                    reject('the value is too small');
                }

                setTimeout(() => {
                    resolve(`you walked for ${amount}ms`);
                }, amount);
            });
            
        }

        // walk(1000).then(res => {
        //     console.log(res);
        //     return walk(500);
        // }).then(res => {
        //     console.log(res);
        //     return walk(700);
        // }).then(res => {
        //     console.log(res);
        //     return walk(800);
        // }).then(res => {
        //     console.log(res);
        //     return walk(100);
        // }).then(res => {
        //     console.log(res);
        //     return walk(400);
        // }).then(res => {
        //     console.log(res);
        //     return walk(600);
        // });

        // 예제1 리팩터링
        async function go() {
            // 프로미스가 완료될 때까지 기다리기 위해 await 키워드를 사용
            const res = await walk(500); // 0.5초 기다림
            console.log(res);
            const res2 = await walk(900);   // 0.9초 기다림
            console.log(res2);
            const res3 = await walk(600);   // 0.6초 기다림
            console.log(res3);
            const res4 = await walk(700);   // 0.7초 기다림
            console.log(res4);
            const res5 = await walk(400);   // 실패처리됨
            console.log(res5);
            console.log('finished');       
            // await를 쓰면 우리가 평상 시 코딩하는 것처럼 동기적 코드로 보임(가독성)
        }
        go();
        // await는 비동기 함수 내에서만 사용 가능!


        // 예제2
        // 깃허브API로 특정 사용자 정보 조회
        fetch('https://api.github.com/users/fkdkskdfjfk')
            .then(res => {
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
                console.log(res); //Response 객체
=======
>>>>>>> 37872db ('11')
=======
                console.log(res); //Response 객체
>>>>>>> b0fca69 (l)
=======
>>>>>>> 37872db ('11')
=======
                console.log(res); //Response 객체
>>>>>>> b0fca69 (l)
                return res.json(); // 응답을 JS 객체 형식으로 변환
            })
            .then(res => {
                // 성공 시 데이터를 출력
                console.log(res);
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> b0fca69 (l)
=======
>>>>>>> b0fca69 (l)
            })
            .catch(err => {
                // 실패 시 오류 출력
                console.error(err);
            });

        // 예제2 리팩터링
        // Quiz
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> e3c5ce4 (kk)
        const getGithubUserInfo = async username => {
            const res = await fetch(`https://api.github.com/users/${username}`);
            const userInfo = await res.json();
            console.log(userInfo);
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> e3adb4d (sdf)

            // Quiz: try/catch로 에러 처리 추가
            try {
                const res = await fetch(`https://api.github.com/users/${username}`);                
                console.log(res);
            } catch (err) {
                console.error(err);
            }
        };
        getGithubUserInfo('fkdkskdfjfk');


        // 3-2. 오류 처리
        // 일반적인 프로미스에서는 catch()를 사용하여 오류들을 처리
        // async/await도 비슷 - try/catch 구문 사용
<<<<<<< HEAD
        async function asyncFunc() {
            try {
                // 에러 발생 가능한 코드들을 여기에
                const response = await fetch('api-url');
                console.log(response);
                if (!response.ok) {
                    throw new Error(`${response.status} (${response.statusText})`);
                }
            } catch (err) {
                console.error(err);
            }
        }
        asyncFunc();

=======
>>>>>>> bf32897 (df)
=======
>>>>>>> 1f32dd0 (as)
=======
            });
>>>>>>> 37872db ('11')
=======
=======
        };
        getGithubUserInfo('fkdkskdfjfk');

>>>>>>> e3c5ce4 (kk)
=======
>>>>>>> 6170f09 (qq)
        async function asyncFunc() {
            try {
                // 에러 발생 가능한 코드들을 여기에
                const response = await fetch('api-url');
                console.log(response);
                if (!response.ok) {
                    throw new Error(`${response.status} (${response.statusText})`);
                }
            } catch (err) {
                console.error(err);
            }
        }
<<<<<<< HEAD
<<<<<<< HEAD
        asyncFunc();
>>>>>>> b0fca69 (l)
=======
>>>>>>> 6170f09 (qq)
=======
        asyncFunc();

>>>>>>> e3adb4d (sdf)
=======
>>>>>>> bf32897 (df)
=======
>>>>>>> 1f32dd0 (as)
=======
            });
>>>>>>> 37872db ('11')
=======
        async function asyncFunc() {
            const obj = await fetch('https://api.github.com/users/fkdkskdfjfk');
            const asy = await obj.json();
            console.log(asy);
            const suc = await asy;
            console.log(suc);
            
        }
        asyncFunc();
>>>>>>> b0fca69 (l)
    </script>
</head>
<body>
    
</body>
</html>